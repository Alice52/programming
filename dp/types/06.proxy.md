[toc]

## overview

1. [java-ocean](https://github.com/Alice52/java-ocean/blob/master/java/se/v2/proxy/proxy.md)

## 代理模式

1. intros
   - definition
2. feature
3. pros
4. cons
5. types

   - 静态代理
   - 动态代理: jdk & cglib

## uml 图

1. roles

   - 抽象主题(Subject)类: 真实被代理的对象的基类或接口
   - 真实主题(Real Subject)类: 真实被代理的对象, 最终要引用的对象
   - 代理(Proxy)类: 提供了与真实主题相同的接口(持有被代理类对象), 它可以**访问、控制或扩展**被代理类

2. uml

   ![avatar](/static/image/dp/proxy-uml.png)

3. explain
   - Real world example: 车票(抽象主题)-火车站(被代理对象)-代售点(代理对象)
   - In plain words: 通过手动或自动的持有被代理对象, 实现对其访问,控制,扩展被代理对象

## 适应场景

1. 业务系统的非功能性需求开发: aop

   - 监控、统计、鉴权、限流、事务、幂等、日志

2. 代理模式在 RPC

   - RPC 框架可以看作一种代理模式: 通过远程代理, 将网络通信、数据编解码等细节隐藏起来

3. 缓存中的应用: 比如一个根据参数判断是查缓存还是实时查询的接口就可以通过动态代理实现

## 实现过程

1. 查看 javase#proxy 模块代码

## 经典使用举例

1. jdk
2. spring
3. working sample

## notice

1. n/a

## relative

1. 静态代理

   - cons: 强耦合, 通用性低
   - impl: 通过代码层面持有被代理对象
   - pros: 可以访问、控制或扩展被代理类

2. 动态代理:

   - jdk(接口代理): Proxy 提供了创建代理对象的静态方法(通用性)
   - cglib(接口&类代理)

3. aop

## reference

1. https://github.com/Alice52/Alice52/files/7326309/-day06.pdf
2. https://www.aliyundrive.com/drive/folder/62008661f37d5fd3b1df40a38d9108c4234f1dca
